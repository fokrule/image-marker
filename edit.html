<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
<script src="https://use.fontawesome.com/6f0501db0b.js"></script>
    <title>Hello, world!</title>
  </head>
  <style>
  	#myDiv-1 {
  position: relative;
  border: 1px solid green;
}

#myDiv-1 i {
  position: absolute;
  color: rgb(0, 255, 255);
  mix-blend-mode: difference;
  margin: 0;
  padding: 0;
}
  </style>
  <body>
  	
  	<br>
  	<br>
  	<br>
    <br>
    <!-- https://thumbs.dreamstime.com/z/bicycle-flower-crate-beautiful-sunset-scene-112834704.jpg
     -->
<div id="myDiv-1">
	
</div>

<button id="convert">convert</button>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
$(document).ready(function(){
var data = localStorage.getItem("imageData");
$("#myDiv-1").html(data);
});
    $(function() {
    	var i = 0;
	  $.fn.setMarker = function(e, o) {
	  	i++;
	    if (o == undefined) {
	      o = $("<i>", {
	        class: "fa fa-star"
	      }).html("<span class='number' style='color:red;'>"+i+"<span>");
	    }
	    var self = $(this);
	    var marker = o.appendTo(self.parent()).css({
	      top: (e.pageY - self.offset().top) + "px",
	      left: (e.pageX - self.offset().left) + "px"
	    });
	  }

  $('#myDiv-1').on("click", "img", function(e) {
    $(this).setMarker(e);
  });
});

$("#convert").click(function(){
var editedCode = $('#myDiv-1').html();
localStorage.setItem("imageData", editedCode);
//convertImageToString();






	// let imageURL = "C:/Users/Forhad/Desktop/draw/base.png";
 
 //  downloadedImg = new Image;
 //  downloadedImg.crossOrigin = "Anonymous";
 //  downloadedImg.src = imageURL;
 //  console.log(downloadedImg);

	// var imagepath = $("#image").val();
// 	console.log(imagepath);
// 	var img = new Image();
// img.setAttribute('crossOrigin', 'anonymous');
// img.src = imagepath;
// console.log(imagepath);
	// toDataUrl(imagepath, function(myBase64) {
 //    console.log(myBase64); // myBase64 is the base64 string
 // });
});

function convertImageToString () {
    var canvas = document.createElement('canvas');
    var image = document.getElementById('image');
    canvas.height = image.naturalHeight;
    canvas.width = image.naturalWidth;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
    var base64String = canvas.toDataURL();
    console.log(base64String);
    // $(''+ imageDataId +'').val(base64String);
}

    </script>
  </body>
</html>